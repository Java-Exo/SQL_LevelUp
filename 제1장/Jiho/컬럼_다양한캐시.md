# chap 01 DBMS 아키텍처

<br>

## 컬럼 - 다양한 캐시

- 캐시라는 구조는 데이터베이스 계층뿐만 아니라 다양한 계층에서 사용된다. 예를 들어 Linux OS '파일 캐시'라는 캐시를 가진다. 이 캐시는 OS 위에서 작동하는 애플리케이션 등이 사용하지 않는, 남은 메모리를 사용한다. 또한 하드웨어 레벨의 저장소 역시 캐시를 가지고 있다.

- 캐시의 계층

  |      |                           |
  | ---- | ------------------------- |
  | 캐시 | 미들웨어 층(데이터베이스) |
  | 캐시 | OS 층(파일 시스템)        |
  | 캐시 | 하드웨어 층 (저장소)      |

- 애플리케이션에서 데이터베이스의 결과 집합을 캐시에 저장해서, 데이터베이스에 다시 SQL 구문을 발행하지 않아도 사용자에게 결과를 리턴해준느 구조도 일종의 캐시라고 할 수 있다.
  이러한 방법은 최신 데이터를 필요로 하는 경우가 아니라면, 간단하게 애플리케이션 전체의 성능을 개선할 수 있는 방법이다.

- 이러한 다양한 계층의 캐시는 데이터베이스 에서의 캐시 역할과 일부 중복된다. 하지만 다른 계층의 캐시를 많이 할당하는 것보다는, 서버의 실제 메모리를 압박하지 않는 범위에서 데이터베이스의 데이터 캐시를 할당하는 편이 데이터베이스의 성능 향상을 더 기대할 수 있다. OS가 캐시하는 대상은 데이터베이스의 데이터 이외에도 다른 프로세스가 사용하는 데이터가 포함되어 있기 때문이다. 따라서 데이터베이스만 놓고 본다면 캐시 효율이 낮다.

- 그렇다고 데이터베이스에 메모리를 너무 많이 할당해버리면, 물리 메모리가 고갈되어버려 운영체제 단에서 스왑이 일어날 수 있다. 이렇게 되면 슬로 다운이 일어나 주객전도가 되어버리는 꼴이 된다. 따라서 데이터베이스에 메모리를 얼마나 할당할지 판단할 때는 어디까지나 '물리 메모리의 범위에서 가능한 많이'가 원칙이다.

- DBMS 중에는 SQL Server처럼 데이터베이스에 할당되어 있는 메모리를 자동으로 조정할 수 있는 DBMS도 있다.
  이는 OS(윈도우)와 DBMS(SQL Server)를 같은 벤더(마이크로소프트)가 개발해서, 두 개를 밀접하게 연계할 수 있기 때문이다.
